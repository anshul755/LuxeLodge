<% layout("/layout/boilerplate") %>

<style>
  /* Highlight our brand color */
  .text-goldenrod { color: goldenrod !important; }
  /* Custom button */
  .btn-goldenrod {
    background-color: #222;
    color: goldenrod;
    transition: background-color 0.2s ease;
  }
  .btn-goldenrod:hover {
    background-color: #333;
    color: #fff;
  }
  /* Center the card vertically on desktop, add some spacing on mobile */
  .signup-wrapper {
    min-height: 100vh;
    display: flex;
    align-items: center;
    padding: 2rem 0;
  }
</style>

<div class="container signup-wrapper">
  <div class="row justify-content-center w-100">
    <div class="col-sm-10 col-md-8 col-lg-6 col-xl-5">
      <div class="card shadow-sm border-0">
        <div class="card-body p-4 p-md-5">
          <% if (error && error.length) { %>
            <div class="alert alert-danger alert-dismissible fade show">
              <%= error %>
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          <% } %>

          <h2 class="card-title text-center mb-4">
            Sign Up for <span class="text-goldenrod">LuxeLodge</span>
          </h2>

          <form action="/signup" method="POST" class="needs-validation" novalidate>
            <div class="mb-3">
              <label for="username" class="form-label">Username</label>
              <input
                type="text"
                class="form-control"
                id="username"
                name="username"
                placeholder="Choose a username"
                required
              >
              <div class="invalid-feedback">Please enter a username.</div>
            </div>

            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input
                type="email"
                class="form-control"
                id="email"
                name="email"
                placeholder="you@example.com"
                required
              >
              <div class="invalid-feedback">Please enter a valid email address.</div>
            </div>

            <div class="mb-4">
              <label for="password" class="form-label">Password</label>
              <input
                type="password"
                class="form-control"
                id="password"
                name="password"
                placeholder="Create a password"
                required
              >
              <div class="invalid-feedback">Please enter a password.</div>
            </div>

            <button type="submit" class="btn btn-goldenrod w-100 py-2">
              Sign Up
            </button>
          </form>
        </div>
      </div>
      <p class="text-center small text-muted mt-3">
        Already have an account?
        <a href="/login" class="text-goldenrod text-decoration-none">Log in</a>
      </p>
    </div>
  </div>
</div>

<script>
  // Bootstrap validation
  (() => {
    'use strict';
    const forms = document.querySelectorAll('.needs-validation');
    forms.forEach(form => {
      form.addEventListener('submit', event => {
        if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      });
    });
  })();
</script>
